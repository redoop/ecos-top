VERILATOR = verilator
VERILATOR_FLAGS = --cc --exe --build --trace
TOP_MODULE = soc_tb
FILELIST = filelist_complete.f
SIM_MAIN = sim_main_complete.cpp

all: compile run

compile:
	$(VERILATOR) $(VERILATOR_FLAGS) -f $(FILELIST) $(SIM_MAIN) --top-module $(TOP_MODULE)

run:
	./obj_dir/V$(TOP_MODULE)

clean:
	rm -rf obj_dir *.vcd *.log

wave:
	gtkwave wave.vcd &

.PHONY: all compile run clean wave
